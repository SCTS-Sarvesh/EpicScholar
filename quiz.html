<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quiz Generator AI App</title>
  <style>
    body {
  background: #212121;
  margin: 0;
  font-family: Arial, sans-serif;
}
.app {
  background: #fff;
  width: 90%;
  max-width: 600px;
  margin: 40px auto 0;
  border-radius: 10px;
  padding: 30px;
}
.app h1 {
  font-size: 28px;
  color: #001e4d;
  margin-bottom: 16px;
}
label {
  display: block;
  margin: 10px 0 3px 0;
}
textarea, select {
  width: 100%;
  margin-bottom: 10px;
  font-size: 16px;
}
button {
  margin: 10px 0;
  padding: 10px;
  border-radius: 4px;
  border: none;
  background: #001e4d;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
}
button:disabled {
  background: #aaa;
  cursor: not-allowed;
}
#quiz {
  margin-top: 20px;
}
.question-block {
  margin-bottom: 20px;
}
.option {
  margin-left: 20px;
}
.correct {
  background-color: #9aeabc;
}
.incorrect {
  background-color: #ff9393;
}

  </style>
</head>
<body>
  <div class="app">
    <h1>Quiz Generator AI App</h1>
    <label>Paste learning content:</label>
    <textarea id="content" rows="6" cols="50"></textarea>
    <label>Difficulty:</label>
    <select id="difficulty">
      <option value="easy">Easy</option>
      <option value="medium">Medium</option>
      <option value="hard">Hard</option>
    </select>
    <button id="generateBtn">Generate Quiz</button>
    <div id="quiz"></div>
    <button id="submitBtn" style="display:none;">Submit Quiz</button>
    <div id="result"></div>
  </div>
  <script>
    const OPENAI_API_KEY = "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"; // Replace with your OpenAI API key

document.getElementById("generateBtn").onclick = async function () {
  const content = document.getElementById("content").value.trim();
  const level = document.getElementById("difficulty").value;
  if (!content) {
    alert("Content required");
    return;
  }
  document.getElementById("quiz").innerHTML = "Generating questions...";
  document.getElementById("result").innerHTML = "";
  document.getElementById("submitBtn").style.display = "none";

  // Prepare the prompt
  const prompt = `
Given the following text, create a quiz of three multiple choice questions (MCQ) at ${level} difficulty. 
Do not repeat questions and only use information from the text.
Format the response as JSON:
{
  "mcqs": [
    {
      "question": "Question text",
      "options": ["A", "B", "C", "D"],
      "correct_answer": "A"
    },
    ...
  ]
}
Text:
${content}
`;

  // Call OpenAI GPT3.5
  const response = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      "Authorization": `Bearer ${OPENAI_API_KEY}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      model: "gpt-3.5-turbo",
      messages: [{ role: "user", content: prompt }],
      max_tokens: 700,
      temperature: 0.8
    })
  });
  const data = await response.json();
  let mcqs;
  try {
    // Find the MCQ JSON part in the response
    const match = data.choices[0].message.content.match(/({[\s\S]*})/);
    mcqs = JSON.parse(match[1]).mcqs;
  } catch (e) {
    document.getElementById("quiz").innerHTML = "Failed to parse quiz questions. Try different input.";
    return;
  }

  // Render quiz
  let quizHtml = "";
  mcqs.forEach((q, idx) => {
    quizHtml += `<div class="question-block">
      <div><b>Q${idx + 1}:</b> ${q.question}</div>
      ${q.options.map((opt, i) =>
        `<label class="option"><input name="q${idx}" type="radio" value="${opt}"> ${opt}</label>`
      ).join("<br>")}
    </div>`;
  });

  document.getElementById("quiz").innerHTML = quizHtml;
  document.getElementById("submitBtn").style.display = "block";

  document.getElementById("submitBtn").onclick = function () {
    let score = 0;
    mcqs.forEach((q, idx) => {
      const selected = (
        document.querySelector(`input[name="q${idx}"]:checked`) || {}
      ).value;
      const correct = q.correct_answer;
      if (selected === correct) score++;
    });
    document.getElementById("result").innerHTML =
      `Score: ${score} / ${mcqs.length}<br><br>` +
      mcqs.map((q, idx) => {
        const selected = (
          document.querySelector(`input[name="q${idx}"]:checked`) || {}
        ).value;
        let color = selected === q.correct_answer ? "correct" : "incorrect";
        return `<div class="question-block ${selected ? color : ""}">
          <b>Q${idx + 1}:</b> ${q.question}<br>
          Selected: ${selected || "-"}<br>Correct: ${q.correct_answer}
        </div>`;
      }).join("");
  };
};
  </script>
</body>
</html>
